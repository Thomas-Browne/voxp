---
format: html
editor: visual
---

# voxp - assign.majority

The voxp package is a handy tool for finding the most common value of a variable in a dataset. It implements the assign.majority function, which takes a dataset with a unique identifier column and a defining variable, and a proportion threshold as an input. The function returns the most frequent value of the defining variable for each identifier, as long as it meets or exceeds the proportion threshold. The name voxp comes from the Latin vox populi, meaning "voice of the people", and is intended to convey the use case of the function: applying outcomes based on a loose 'majority rules' model. The voxp package can be useful for data analysis, summarization, and visualization, especially when dealing with categorical or nominal variables. For example, you can use it to find the most common genre of movies for each director, the most common occupation of customers for each product, or the most likely country of birth of a patient with non-conforming country of birth data.

The voxp package is easy to install and use, and has documentation accessible by:

1.  Running the help function;

```{r eval=FALSE}
?assign.Majority
```

2.  Reading through the [Github](https://github.com/Thomas-Browne/voxp) page;

```{r eval=FALSE}
browseURL("https://github.com/Thomas-Browne/voxp")
```

3.  Following the documentation below.

------------------------------------------------------------------------

## Installing and loading the package

The package and assign.Majority function is not installed and loaded by default. Steps will have to be undertaken to install the package (at least once), and load the package for each R session.

### Instalation

Installing the package will require the package devtools. This package is not installed by default.

```{r eval=FALSE}
# Install devtools if not already installed
install.packages("devtools")

# Load devtools
library(devtools)

```

Once installed and loaded, you can install the voxp package from it's github repository using the code below/

```{r eval=FALSE}
devtools::install_github("https://github.com/Thomas-Browne/voxp")
```

The package is now installed on your device. The above code will not need to be run again until you would like to install any updates to the package, or you would like to install it again.

### Loading

Once installed, the package needs to be loaded before it's contents can be used. This will have to be done once per session of R Studio i.e. if you close or restart R Studio, the package will need to be loaded again from your package library. Regardless of the circumstance, loading voxp can be done like any other package.

```{r eval=FALSE}
library(voxp)
```

The voxp package is now loaded and you will be able to access the assign.Majority function.

## Usage

The `voxp` package is designed to help you find the most common value of a variable in a dataset, based on a proportion threshold. To use the `voxp` package, you need to have a dataset with a unique identifier column and a defining variable. The identifier column is the one that groups your data into different categories, such as director, patient number, or season. The defining variable is the one that you want to find the most common value for, such as genre, occupation, or color. The best use case of this function would be in scenarios where the value shouldn't, or shouldn't frequently such as date of birth, country of birth, most common flower by season etc.

You can also specify a proportion threshold, which is the minimum percentage of occurrences that the most common value must have in order to be assigned. For example, if you set the threshold to 0.5, then the most common value must appear at least 50% of the time within each category. The function defaults at 0.8.

Here is an example of how to use the `assign.majority` function:

```{r eval=FALSE}
library(voxp)

data <- data.frame(
  id = c(1, 1, 1, 2, 2, 3),
  colour = c("red", "red", "blue", "green", "green", "green")
)

assign.Majority(data, data$id, data$colour, proportion_threshold = 0.5)
#>   id colour
#> 1  1   red
#> 2  2 green
#> 3  3 green
```

You can see that the function assigns the most common color for each id, as long as it appears more than 50% of the time. If you change the threshold to a lower or higher value, you will get different results.

```{r eval=FALSE}
library(voxp)

data <- data.frame(
  id = c(1, 1, 1, 2, 2, 3),
  colour = c("red", "red", "blue", "green", "yellow", "green"),
  shape = c("circle", "square", "triangle", "circle", "square", "triangle"),
  size = c(10, 20, 30, 40, 50, 60)
)

result <- assign.Majority(data = data,
                          identifier = data$id,
                          column = data$colour,
                          proportion_threshold  = 0.7)

result$shape <- assign.Majority(data = data,
                                identifier = data$id,
                                column = data$shape,
                                proportion_threshold = 0.5)$variable

result$size <- assign.Majority(data = data,
                               identifier = data$id,
                               column = data$size,
                               proportion_threshold = 0.5)$variable

print(result)

```

## Issues and improvements

Please submit bugs, issues and suggested improvements on [Github](https://github.com/Thomas-Browne/voxp/issues)

Known issues:

-   It doesn't work

-   Should be able to define column names without the dataframe

## Contributing

Contributions to this package are welcome. You can contribute by:

-   Reporting bugs or issues on [Github](https://github.com/Thomas-Browne/voxp/issues)

-   Suggesting new features or improvements on [Github](https://github.com/Thomas-Browne/voxp/issues)

-   Forking this repository and submitting a pull request.
